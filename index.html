<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>A SMARTER ME!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --safe-area-inset-top: env(safe-area-inset-top, 0px);
            --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
        }

        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(-45deg, rgb(46, 26, 71), rgb(26, 26, 46), rgb(15, 48, 87), rgb(75, 0, 130));
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            font-family: 'Quicksand', sans-serif;
            overflow: hidden;
            color: white;
            height: 100vh;
            width: 100vw;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .cinzel { font-family: 'Cinzel', serif; }

        .gold-border {
            border: clamp(2px, 0.4vw, 6px) solid rgb(255, 215, 0);
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.3), inset 0 0 20px rgba(255, 215, 0, 0.1);
        }

        .shiny-gold-text {
            background: linear-gradient(to right, #ffd700, #fffacd, #ffd700, #daa520, #ffd700);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            to { background-position: 200% center; }
        }

        .choice-btn-unified { 
            background: linear-gradient(135deg, rgb(74, 0, 224), rgb(142, 45, 226)); 
        }

        .choice-btn {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .choice-btn:active { transform: scale(0.95); }

        .lion-container {
            animation: bounce 3s infinite alternate ease-in-out;
            max-height: 35vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @keyframes bounce {
            from { transform: translateY(0) scale(1); }
            to { transform: translateY(-20px) scale(1.04); }
        }

        .screen {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: calc(1rem + var(--safe-area-inset-top)) 1rem calc(1rem + var(--safe-area-inset-bottom));
            text-align: center;
            position: absolute;
            top: 0;
            left: 0;
        }

        .screen.active { display: flex; }

        .bg-canvas-layer {
            position: fixed;
            top: 0; left: 0; z-index: -1;
            width: 100vw; height: 100vh;
        }

        .content-wrap {
            width: 100%;
            max-width: 1200px; /* Constrain width for large screens */
            height: 100%;
            max-height: 900px; /* Constrain height for large screens */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* Changed from space-around to center for better grouping */
            gap: 4vh; /* Consistent spacing */
            margin: auto;
        }

        .fullscreen-btn {
            position: fixed;
            top: 1.5rem;
            right: 1.5rem;
            z-index: 100;
            background: rgba(255, 215, 0, 0.15);
            border: 2px solid rgb(255, 215, 0);
            border-radius: 14px;
            width: 54px; height: 54px;
            display: flex; align-items: center; justify-content: center;
            color: rgb(255, 215, 0);
            cursor: pointer;
        }

        .conclusion-small {
            font-family: 'Quicksand', sans-serif;
            font-size: 0.35em;
            display: block;
            margin-bottom: 0.5vh;
            opacity: 1;
            -webkit-text-fill-color: white;
            text-transform: none;
        }

        @media (min-width: 1900px) {
            h1 { font-size: 9rem !important; }
            h2 { font-size: 5rem !important; }
            p { font-size: 3rem !important; }
            .choice-btn { min-height: 400px !important; }
            .content-wrap { max-width: 1600px; max-height: 1200px; }
        }

        @media (max-height: 600px) and (orientation: landscape) {
            .content-wrap { flex-direction: row; gap: 2rem; flex-wrap: wrap; }
            .lion-container { width: 25%; }
            .start-text-group { width: 65%; }
            h1 { font-size: 2.5rem !important; }
            .choice-btn { min-height: 100px !important; flex-direction: row !important; }
            .grid { grid-template-columns: repeat(2, 1fr) !important; width: 100%; }
            .question-header { width: 100%; }
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <canvas id="bg-canvas" class="bg-canvas-layer"></canvas>

    <button id="fs-btn" class="fullscreen-btn" title="Full Screen">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
        </svg>
    </button>

    <div id="start-screen" class="screen active">
        <div class="content-wrap">
            <div class="lion-container">
                <svg class="w-32 h-32 sm:w-48 sm:h-48 md:w-64 md:h-64" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" fill="rgba(255, 215, 0, 0.2)" stroke="rgb(255, 215, 0)" stroke-width="2" />
                    <path d="M50 15L58 38H82L63 52L70 75L50 60L30 75L37 52L18 38H42L50 15Z" fill="rgb(255, 215, 0)" />
                </svg>
            </div>
            <div class="start-text-group space-y-6">
                <h1 class="cinzel text-5xl sm:text-7xl md:text-8xl shiny-gold-text uppercase font-black leading-tight">A SMARTER ME!</h1>
                <p class="text-xl sm:text-2xl text-cyan-200 font-bold uppercase tracking-widest">Find your special heart!</p>
                <button id="start-btn" class="bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 gold-border px-12 py-5 sm:px-24 sm:py-8 rounded-full text-2xl sm:text-4xl cinzel uppercase font-black text-white shadow-2xl transition-transform active:scale-90 hover:brightness-110">Play Game</button>
            </div>
        </div>
    </div>

    <div id="question-screen" class="screen">
        <div class="content-wrap">
            <div class="question-header w-full max-w-2xl space-y-8">
                <div id="progress-bar" class="w-full h-5 bg-white/10 rounded-full overflow-hidden border border-white/5">
                    <div id="progress-inner" class="h-full bg-gradient-to-r from-cyan-400 to-blue-500 transition-all duration-500" style="width: 0%"></div>
                </div>
                <h2 id="question-text" class="cinzel text-3xl sm:text-5xl md:text-6xl text-white font-bold">What do you pick?</h2>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-8 w-full">
                <button id="btn-a" class="choice-btn choice-btn-unified gold-border p-8 rounded-3xl flex flex-col items-center justify-center space-y-6 min-h-[180px]">
                    <div id="option-a-icon" class="text-7xl sm:text-9xl">‚ú®</div>
                    <span id="option-a-text" class="text-xl sm:text-3xl font-black uppercase text-white">Action One</span>
                </button>
                <button id="btn-b" class="choice-btn choice-btn-unified gold-border p-8 rounded-3xl flex flex-col items-center justify-center space-y-6 min-h-[180px]">
                    <div id="option-b-icon" class="text-7xl sm:text-9xl">üåü</div>
                    <span id="option-b-text" class="text-xl sm:text-3xl font-black uppercase text-white">Action Two</span>
                </button>
            </div>
        </div>
    </div>

    <div id="result-screen" class="screen">
        <div class="content-wrap">
            <h1 id="result-title" class="cinzel text-5xl sm:text-7xl md:text-9xl shiny-gold-text font-black uppercase text-center leading-tight"></h1>
            <div class="lion-container">
                <svg id="result-svg" class="w-48 h-48 sm:w-64 sm:h-64 md:w-80 md:h-80" viewBox="0 0 200 200">
                    <circle cx="100" cy="100" r="80" fill="url(#auraGrad)" opacity="0.6" />
                    <defs>
                        <radialGradient id="auraGrad"><stop offset="0%" stop-color="rgb(255, 215, 0)" /><stop offset="100%" stop-color="transparent" /></radialGradient>
                    </defs>
                    <path id="svg-cape" d="M30 70 Q100 20 170 70 L190 190 Q100 160 10 190 Z" fill="rgb(233, 30, 99)" />
                    <circle id="svg-mane" cx="100" cy="100" r="65" fill="#ff9800" />
                    <circle id="svg-mane-inner" cx="100" cy="100" r="55" fill="#ffeb3b" />
                    <ellipse cx="100" cy="110" rx="45" ry="50" fill="#ffe0b2" />
                    <circle cx="82" cy="100" r="7" fill="rgb(26, 26, 46)" />
                    <circle cx="118" cy="100" r="7" fill="rgb(26, 26, 46)" />
                    <path d="M92 120 L108 120 L100 128 Z" fill="rgb(93, 64, 55)" />
                    <g id="accessory-group">
                        <path id="svg-hat" d="M60 60 L75 30 L100 50 L125 30 L140 60 Z" fill="rgb(255, 215, 0)" stroke="rgb(255, 143, 0)" stroke-width="3"/>
                        <circle id="dot-1" cx="60" cy="60" r="5" fill="rgb(244, 67, 54)" />
                        <circle id="dot-2" cx="100" cy="50" r="5" fill="rgb(33, 150, 243)" />
                        <circle id="dot-3" cx="140" cy="60" r="5" fill="rgb(76, 175, 80)" />
                    </g>
                </svg>
            </div>
            <div class="space-y-8 max-w-4xl text-center">
                <p id="result-advice" class="text-base sm:text-lg md:text-xl text-cyan-200 font-medium px-6 italic opacity-90"></p>
                <button id="replay-btn" class="bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 gold-border px-12 py-5 sm:px-24 sm:py-8 rounded-full cinzel text-xl sm:text-2xl font-black uppercase text-white shadow-2xl transition-transform active:scale-95 hover:brightness-110">Play Again</button>
            </div>
        </div>
    </div>

    <script>
        window.onload = function() {
            const adventureBank = [
                { q: "You find some trash on the floor.", a: { text: "Pick it up", icon: "üóëÔ∏è", advice: "Helping keep our home clean is a super choice!" }, b: { text: "Leave it there", icon: "üö∂", advice: "Try to help by picking up toys and trash!" } },
                { q: "A friend is feeling sad.", a: { text: "Say kind words", icon: "‚ù§Ô∏è", advice: "Your kind words make everyone feel happy!" }, b: { text: "Walk away", icon: "üë£", advice: "Even a small smile can help a friend feel better!" } },
                { q: "You finish playing with toys.", a: { text: "Clean them up", icon: "üß∏", advice: "Cleaning up toys is what smart heroes do!" }, b: { text: "Make a mess", icon: "üå™Ô∏è", advice: "Putting toys back helps you find them next time!" } },
                { q: "You have a yummy snack.", a: { text: "Share with others", icon: "üç™", advice: "Sharing snacks is the best way to have fun!" }, b: { text: "Eat it all alone", icon: "üôä", advice: "Try sharing next time to see a friend's big smile!" } },
                { q: "You feel very angry.", a: { text: "Take deep breaths", icon: "üå¨Ô∏è", advice: "Deep breaths help you stay calm and smart!" }, b: { text: "Scream and shout", icon: "üì¢", advice: "If you feel mad, try counting to five next time!" } },
                { q: "Someone needs help reaching a toy.", a: { text: "Help them out", icon: "ü§ù", advice: "Helping others makes you a great leader!" }, b: { text: "Keep it for yourself", icon: "ü§ö", advice: "Being helpful feels better than having all the toys!" } },
                { q: "You see a thirsty plant.", a: { text: "Give it water", icon: "üíß", advice: "Caring for plants helps the whole world grow!" }, b: { text: "Pull its leaves", icon: "ü•Ä", advice: "Being gentle with nature is a very smart habit!" } },
                { q: "You make a little mistake.", a: { text: "Say sorry", icon: "üôè", advice: "Saying sorry shows how brave and smart you are!" }, b: { text: "Blame a friend", icon: "üëâ", advice: "It is okay to make mistakes; just be honest!" } }
            ];

            const resultCategories = {
                high: {
                    titles: ["GOLD HEART HERO!", "KIND LEADER!", "KINDNESS CHAMPION!", "SUPER HELPER!", "JOY BRINGER!", "PURE HEART!", "KINDNESS MASTER!", "GRAND LEADER!"],
                },
                medium: {
                    titles: ["BRAVE SCOUT!", "SMART CHOICE MAKER!", "DAILY STAR!", "COOL FRIEND!", "WISE EXPLORER!", "GREAT TEAMMATE!", "SMART THINKER!", "BRAVE HEART!"],
                },
                low: {
                    titles: ["SMART LEARNER!", "GROWING HERO!", "NEW EXPLORER!", "FUTURE LEADER!", "BRAVE BEGINNER!", "KIND STUDENT!", "RISING STAR!", "NEW HERO!"],
                }
            };

            let activeQuestions = [], currentQuestion = 0, scoreA = 0;
            let userChoicesAdvice = [];
            const canvas = document.getElementById('bg-canvas'), ctx = canvas.getContext('2d');
            let particles = [];

            function resize() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                initParticles();
            }

            class Particle {
                constructor() { this.reset(); }
                reset() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.size = Math.random() * 5 + 1;
                    this.speedX = (Math.random() - 0.5) * 1.5;
                    this.speedY = (Math.random() - 0.5) * 1.5;
                    this.opacity = Math.random();
                    const colors = ['#ffd700', '#daa520', '#fffacd', '#ffffff'];
                    this.color = colors[Math.floor(Math.random() * colors.length)];
                }
                update() {
                    this.x += this.speedX; this.y += this.speedY;
                    if (this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) this.reset();
                }
                draw() {
                    ctx.fillStyle = this.color; ctx.globalAlpha = this.opacity * 0.45;
                    ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
                }
            }

            function initParticles() {
                particles = [];
                const count = window.innerWidth < 768 ? 30 : 100;
                for (let i = 0; i < count; i++) particles.push(new Particle());
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => { p.update(); p.draw(); });
                requestAnimationFrame(animate);
            }

            function showScreen(id) {
                document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
                document.getElementById(id).classList.add('active');
            }

            function loadQuestion() {
                const data = activeQuestions[currentQuestion];
                document.getElementById('question-text').innerText = data.q;
                
                const isSwapped = Math.random() > 0.5;
                const opt1 = isSwapped ? data.b : data.a;
                const opt2 = isSwapped ? data.a : data.b;
                const type1 = isSwapped ? 'B' : 'A';
                const type2 = isSwapped ? 'A' : 'B';

                const btnA = document.getElementById('btn-a');
                const btnB = document.getElementById('btn-b');

                document.getElementById('option-a-text').innerText = opt1.text;
                document.getElementById('option-a-icon').innerText = opt1.icon;
                btnA.setAttribute('data-type', type1);
                btnA.setAttribute('data-advice', opt1.advice);

                document.getElementById('option-b-text').innerText = opt2.text;
                document.getElementById('option-b-icon').innerText = opt2.icon;
                btnB.setAttribute('data-type', type2);
                btnB.setAttribute('data-advice', opt2.advice);

                document.getElementById('progress-inner').style.width = `${(currentQuestion / activeQuestions.length) * 100}%`;
            }

            function startGame() {
                activeQuestions = [...adventureBank].sort(() => Math.random() - 0.5).slice(0, 5);
                currentQuestion = 0; scoreA = 0; userChoicesAdvice = [];
                showScreen('question-screen');
                loadQuestion();
            }

            function handleChoice(elementId) {
                const btn = document.getElementById(elementId);
                const type = btn.getAttribute('data-type');
                const advice = btn.getAttribute('data-advice');
                if (type === 'A') scoreA++;
                userChoicesAdvice.push(advice);
                createExplosion();
                currentQuestion++;
                if (currentQuestion < activeQuestions.length) setTimeout(loadQuestion, 200);
                else showResult();
            }

            function showResult() {
                showScreen('result-screen');
                const titleEl = document.getElementById('result-title');
                const adviceEl = document.getElementById('result-advice');
                const hat = document.getElementById('svg-hat');
                const cape = document.getElementById('svg-cape');
                const dots = [document.getElementById('dot-1'), document.getElementById('dot-2'), document.getElementById('dot-3')];

                let cat = "";
                if (scoreA === 5) cat = "high";
                else if (scoreA >= 3) cat = "medium";
                else cat = "low";

                const category = resultCategories[cat];
                const randomIndex = Math.floor(Math.random() * category.titles.length);
                
                titleEl.innerHTML = '<span class="conclusion-small">You are</span>A ' + category.titles[randomIndex];

                if (cat === "high") {
                    hat.setAttribute('d', 'M60 60 L75 30 L100 50 L125 30 L140 60 Z');
                    hat.setAttribute('fill', 'rgb(255,215,0)');
                    dots.forEach(d => d.style.display = 'block');
                    cape.setAttribute('fill', 'rgb(233, 30, 99)');
                } else if (cat === "medium") {
                    hat.setAttribute('d', 'M50 65 L60 55 Q100 35 140 55 L150 65 Q100 75 50 65');
                    hat.setAttribute('fill', 'rgb(215, 196, 158)');
                    dots.forEach(d => d.style.display = 'none');
                    cape.setAttribute('fill', 'rgb(33, 150, 243)');
                } else {
                    hat.setAttribute('d', 'M50 65 L60 55 Q100 35 140 55 L150 65 Q100 75 50 65');
                    hat.setAttribute('fill', 'rgb(180, 180, 180)');
                    dots.forEach(d => d.style.display = 'none');
                    cape.setAttribute('fill', 'rgb(75, 0, 130)');
                }

                let finalAdvice = "";
                const badChoiceAdvices = userChoicesAdvice.filter(a => a.includes("Try") || a.includes("Next") || a.includes("If"));
                if (badChoiceAdvices.length > 0) finalAdvice = badChoiceAdvices[Math.floor(Math.random() * badChoiceAdvices.length)];
                else finalAdvice = userChoicesAdvice[Math.floor(Math.random() * userChoicesAdvice.length)];
                adviceEl.innerText = finalAdvice;
            }

            function createExplosion() {
                const colors = ['#FFD700', '#DAA520', '#FFFFFF'];
                for (let i = 0; i < 30; i++) {
                    const p = document.createElement('div');
                    p.className = 'particle';
                    p.style.left = '50%'; p.style.top = '50%';
                    p.style.width = '14px'; p.style.height = '14px';
                    p.style.background = colors[Math.floor(Math.random() * colors.length)];
                    p.style.boxShadow = '0 0 15px white';
                    const angle = Math.random() * Math.PI * 2, dist = Math.random() * 200 + 50;
                    p.animate([{ transform: 'translate(0,0) scale(1.5)', opacity: 1 }, { transform: `translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px) scale(0)`, opacity: 0 }], { duration: 600, easing: 'ease-out' }).onfinish = () => p.remove();
                    document.body.appendChild(p);
                }
            }

            document.getElementById('start-btn').onclick = startGame;
            document.getElementById('btn-a').onclick = () => handleChoice('btn-a');
            document.getElementById('btn-b').onclick = () => handleChoice('btn-b');
            document.getElementById('replay-btn').onclick = () => showScreen('start-screen');
            document.getElementById('fs-btn').onclick = function() {
                if (!document.fullscreenElement) document.documentElement.requestFullscreen().catch(() => {});
                else document.exitFullscreen();
            };

            window.addEventListener('resize', resize);
            resize();
            animate();
        };
    </script>
</body>
</html>
